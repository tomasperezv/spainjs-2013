<div class="section">
    <h1>Authenticate a user with Facebook</h1>
    <p class="description">Here, we'll attempt to authenticate a user from Facebook.</p>

    <h3>The Javascript</h3>
    <div id="js"></div>

    <h3>The HTML</h3>
    <div id="html"></div>

    <h3>Live Example</h3>
    <div class="html-snippet" data-container="html">
        <img src="/img/fb-login.png" id="fb-login" />
        <div id="status"></div>
    </div>
    <script type="script/snippet" data-container="js">
        /* Instantiate the global sp object; include models */
        var sp = getSpotifyApi();
        var auth = sp.require('$api/auth');

        /* Set the permissions you want from the user. For more
         * info, check out http://bit.ly/A4KCW3 */
        var permissions = ['user_about_me'];
        var app_id = '126891607432106';
        var fbButtonHTML = document.getElementById('fb-login');

        fbButtonHTML.addEventListener('click', authFB);

        function authFB() {
            auth.authenticateWithFacebook(app_id, permissions, {
                onSuccess: function(accessToken, ttl) {
                    fbButtonHTML.style.display = 'none';
                    var statusHTML = document.getElementById('status');
                    statusHTML.innerText = 'Your access token: ' + accessToken;
                },
                onFailure: function(error) {
                    console.log('Authentication failed with error: ' + error);
                },
                onComplete: function() { }
            });
        }
    </script>
</div>
